{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% block titulo %}
    <title>Impactos Ambientais</title>
    {% endblock titulo %}

    <!-- Bootstrap via CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Seu CSS personalizado -->
   
</head>
<body>

<style>
  .navbar-nav .nav-link {
    position: relative;
    transition: color 0.3s ease;
  }

  .navbar-nav .nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 2px;
    background-color: white;
    transition: all 0.3s ease;
    transform: translateX(-50%);
  }

  /* Hover simples */
  .navbar-nav .nav-link:hover::after {
    width: 70%;
  }

  /* Efeito ativo via JavaScript */
  .navbar-nav .nav-link.active::after {
    width: 70%;
    background-color: #d9ffd9;
  }

  .navbar-nav .nav-link.active {
    color: #d9ffd9 !important;
  }
</style>
    <!-- NAVBAR RESPONSIVA -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-success">
        <div class="container">
            <!-- Logo / Nome -->
            <a class="navbar-brand fw-bold" href="{% url 'index' %}">Impactos Ambientais</a>

            <!-- Bot√£o "Hamb√∫rguer" para celular -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu" aria-controls="menu" aria-expanded="false" aria-label="Menu">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Itens do menu -->
            <div class="collapse navbar-collapse justify-content-center" id="menu">
                <ul class="navbar-nav">

                    <!-- Links vis√≠veis para todos -->
                    <li class="nav-item mx-2">
                        <a class="nav-link text-white" href="{% url 'index' %}">In√≠cio</a>
                    </li>

                    <li class="nav-item mx-2">
                        <a class="nav-link text-white" href="{% url 'sobre' %}">Sobre n√≥s</a>
                    </li>

                    <li class="nav-item mx-2">
                        <a class="nav-link text-white" href="{% url 'listar-noticia' %}?limite=5">√öltimas not√≠cias</a>
                    </li>

                   

                    {% if request.user.is_authenticated %}
                        <!-- Dropdown de Cadastros -->
                        <li class="nav-item dropdown mx-2">
                            <a class="nav-link dropdown-toggle text-white" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Cadastros
                            </a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="{% url 'listar-categoria' %}">Categorias</a></li>
                                <li><a class="dropdown-item" href="{% url 'listar-noticia' %}">Not√≠cias</a></li>
                                <li><a class="dropdown-item" href="{% url 'listar-midia' %}">M√≠dias</a></li>
                                <li><a class="dropdown-item" href="{% url 'listar-comentario' %}">Coment√°rios</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="{% url 'listar-minhas-noticias' %}">Minhas not√≠cias</a></li>
                            </ul>
                        </li>

                        <!-- Outros links para logados -->
                        <li class="nav-item mx-2">
                            <a class="nav-link text-white" href="{% url 'senha' %}">Atualizar senha</a>
                        </li>

                        <li class="nav-item mx-2">
                            <a class="nav-link text-white" href="#" data-bs-toggle="modal" data-bs-target="#logoutModal">Sair</a>
                        </li>

                    {% else %}
                        <li class="nav-item mx-2">
                            <a class="nav-link text-white" href="{% url 'registrar' %}">Registrar</a>
                        </li>
                        <li class="nav-item mx-2">
                            <a class="nav-link text-white" href="{% url 'login' %}">Entrar</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <!-- CONTE√öDO PRINCIPAL -->
    <main class="container my-4">
        {% block conteudo %}
        <div class="container mt-5">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card shadow">
                        <div class="card-body">
                            <h3 class="card-title text-center mb-4">üåç P√°gina Inicial</h3>
                            <p class="card-text">
                                <strong>O Futuro do Planeta Est√° em Nossas M√£os!</strong><br><br>
                                A√ß√µes humanas est√£o transformando o mundo de maneiras irrevers√≠veis. 
                                O aquecimento global, a polui√ß√£o, o desmatamento e a perda de biodiversidade 
                                est√£o afetando a nossa casa comum de forma alarmante.
                            </p>
                            <p class="card-text">
                                <strong class="text-success">Mas h√° esperan√ßa!</strong><br>
                                Com a√ß√µes conscientes, pol√≠ticas sustent√°veis e engajamento coletivo, 
                                podemos reverter muitos dos danos e construir um futuro mais verde e justo.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cards de not√≠cias -->
        <div class="row mt-5">
            {% for noticia in ultimas_noticias %}
            <div class="col-md-4 mb-4">
                <div class="card h-100 shadow-sm">
                    <div class="card-body">
                        <span class="badge bg-secondary mb-2">{{ noticia.categoria }}</span>
                        <h5 class="card-title">{{ noticia.titulo }}</h5>
                        <p class="card-text">{{ noticia.conteudo|truncatechars:150 }}</p>
                        <p>
                            <a href="{% url 'detalhar-noticia' noticia.pk %}" class="btn btn-sm btn-primary">Continuar lendo</a>
                            <small class="float-end text-muted">
                                Publicado em {{ noticia.data_publicacao|date:"d/m/y \\√†\\s H:i" }}<br>
                                Autor: {{ noticia.postado_por }}
                            </small>
                        </p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% endblock %}

        <!-- MENSAGENS DJANGO -->
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} mt-3">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    </main>

    <!-- RODAP√â -->
    <footer class="bg-success text-white text-center py-3 mt-4">
        <div>
            <img src="{% static 'img/logodoTCC.png' %}" width="200" alt="Logo do TCC" />
        </div>
        <div>Desenvolvido por Miriam Cauneto</div>
    </footer>

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- MODAL LOGOUT -->
    <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="logoutModalLabel">Confirmar sa√≠da</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                </div>
                <div class="modal-body">
                    Tem certeza que deseja sair da sua conta?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <form method="post" action="{% url 'logout' %}">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger">Sair</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
</html>