{% extends "paginas/index.html" %}

{% load static %}

{% block conteudo %}


<header>
    <h3> Lista de Comentários</h3>
</header>

    <a href="{% url 'adicionar-comentario' %}" class="btn btn-success">
        <i class="bi bi-plus-lg me-1" aria-hidden="true"></i>
        Adicionar Comentário
    </a>

    <br>
    <table class="table table-striped table-hover">
        <thead class="table-success">
            <tr>
                <th>Autor</th>
                <th>Texto</th>
                <th>Data</th>
                <th>Notícia</th>
                <th>Opções</th>
            </tr>
        </thead>
        <tbody>
    {% for comentario in object_list %}
    <tr>
        <td>{{ comentario.autor }}</td>  <!-- ou o campo correto -->
        <td>{{ comentario.texto }}</td>
        <td>{{ comentario.data }}</td>
        <td>{{ comentario.noticia }}</td>
        <td>
            {# Editar: autor, superuser ou membro do grupo Admin #}
            {% if request.user.is_superuser or request.user|in_group:"Admin" or comentario.autor == request.user %}
            <a href="{% url 'editar-comentario' comentario.pk %}" class="btn btn-sm btn-warning me-2">
                <i class="bi bi-pencil me-1" aria-hidden="true"></i>Editar
            </a>
            {% endif %}
            {# Excluir: somente superuser ou membro do grupo Admin #}
            {% if request.user.is_superuser or request.user|in_group:"Admin" %}
            <a href="{% url 'excluir-comentario' comentario.pk %}" class="btn btn-sm btn-danger">
                <i class="bi bi-trash me-1" aria-hidden="true"></i>Excluir
            </a>
            {% endif %}
        </td>
    </tr>
    {% empty %}
    <tr><td colspan="5" class="text-center">Nenhum comentário encontrado.</td></tr>
    {% endfor %}
    </tbody>
    
</table>

{% endblock %}